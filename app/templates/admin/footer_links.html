{% extends "layouts/base.html" %} {% block title %}Kelola Link Footer{% endblock
%} {% block content %}
<div class="container py-4">
  <h1 class="h5 mb-3">
    Footer Links â€”
    <span class="text-secondary"
      >{{ section.id }} / {{ section.code or 'Tanpa Kode' }}</span
    >
  </h1>

  <!-- FORM TAMBAH LINK -->
  <form
    method="post"
    action="/admin/footer/{{ section.id }}/links/create"
    class="card mb-4 shadow-sm"
  >
    <div class="card-body">
      <div class="row g-3 align-items-center">
        <div class="col-md-3">
          <input
            type="text"
            name="icon"
            class="form-control"
            placeholder="Icon (Bootstrap Icons)"
          />
        </div>
        <div class="col-md-4">
          <input
            type="text"
            name="url"
            class="form-control"
            placeholder="URL (https://...)"
          />
        </div>
        <div class="col-md-1">
          <input
            type="number"
            name="sort_order"
            class="form-control"
            value="0"
          />
        </div>
        <div class="col-md-4">
          <div class="input-group">
            <input
              type="text"
              name="id_label"
              class="form-control"
              placeholder="Label (ID)"
            />
            <input
              type="text"
              name="en_label"
              class="form-control"
              placeholder="Label (EN)"
            />
            <input
              type="text"
              name="ar_label"
              class="form-control"
              placeholder="Label (AR)"
            />
          </div>
        </div>
      </div>
    </div>
    <div class="card-footer text-end">
      <button type="submit" class="btn btn-primary">Tambah Link</button>
      <a href="/admin/footer" class="btn btn-outline-secondary">Kembali</a>
    </div>
  </form>

  <!-- DAFTAR LINK -->
  <div class="table-responsive">
    <table class="table table-hover align-middle">
      <thead class="table-light">
        <tr>
          <th style="width: 5%">#</th>
          <th style="width: 15%">Icon</th>
          <th style="width: 30%">URL</th>
          <th style="width: 10%">Order</th>
          <th>Label (ID)</th>
          <th>Label (EN)</th>
          <th>Label (AR)</th>
          <th style="width: 10%">Status</th>
          <th style="width: 10%">Aksi</th>
        </tr>
      </thead>
      <tbody>
        {% for l in links %}
        <tr>
          <td>{{ loop.index }}</td>
          <td>
            {% if l.icon %}<i class="{{ l.icon }}"></i>{% endif %}
            <small>{{ l.icon or '-' }}</small>
          </td>
          <td><a href="{{ l.url }}" target="_blank">{{ l.url }}</a></td>
          <td>{{ l.sort_order }}</td>

          {% set id_tr = (l.translations | selectattr("lang","equalto","id") |
          list | first) %} {% set en_tr = (l.translations |
          selectattr("lang","equalto","en") | list | first) %} {% set ar_tr =
          (l.translations | selectattr("lang","equalto","ar") | list | first) %}

          <td>{{ id_tr.label if id_tr else '' }}</td>
          <td>{{ en_tr.label if en_tr else '' }}</td>
          <td>{{ ar_tr.label if ar_tr else '' }}</td>

          <td>
            {% if l.is_active %}
            <span class="badge bg-success">Aktif</span>
            {% else %}
            <span class="badge bg-secondary">Nonaktif</span>
            {% endif %}
          </td>

          <td>
            <div class="btn-group">
              <a
                href="/admin/footer/{{ section.id }}/links/{{ l.id }}/edit"
                class="btn btn-sm btn-outline-primary"
                >Edit</a
              >
              <a
                href="/admin/footer/{{ section.id }}/links/{{ l.id }}/delete"
                class="btn btn-sm btn-outline-danger"
                onclick="return confirm('Hapus link ini?')"
                >Hapus</a
              >
            </div>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
