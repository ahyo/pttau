{% extends "layouts/base.html" %}
{% block title %}{{ 'Create' if mode=='create' else 'Edit' }} Page â€” {{ settings.APP_NAME if settings else 'Site' }}{% endblock %}
{% block content %}
{% set data = form_data if form_data else {} %}
{% set current = page if page else None %}
<section class="py-4">
  <div class="container">
    <h1 class="h5 mb-3">{{ 'Create' if mode=='create' else 'Edit' }} Page</h1>
    {% if error %}
    <div class="alert alert-danger">{{ error }}</div>
    {% endif %}
    <form method="post">
      <div class="row g-3">
        <div class="col-md-4">
          <label class="form-label">Slug</label>
          <input
            name="slug"
            class="form-control"
            value="{{ data.get('slug', current.slug if current else '') }}"
            placeholder="otomatis dari judul bila kosong"
          >
        </div>
        <div class="col-md-4">
          <label class="form-label">Template</label>
          {% set sel = data.get('template', current.template if current else 'about') %}
          <select name="template" class="form-select">
            {% for t in ['about','contact','custom'] %}
              <option value="{{t}}" {{ 'selected' if t==sel else '' }}>{{ t }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-md-4 d-flex align-items-end">
          {% set pub = data.get('is_published', 'on' if (current.is_published if current else True) else 'off') %}
          <div class="form-check">
            <input class="form-check-input" type="checkbox" name="is_published" id="is_pub" {{ 'checked' if pub == 'on' else '' }}>
            <label class="form-check-label" for="is_pub">Published</label>
          </div>
        </div>
      </div>

      <hr class="my-4">

      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label">Judul Halaman</label>
          <input
            name="title"
            class="form-control"
            value="{{ data.get('title', current.title if current else '') }}"
            required
          >
        </div>
        <div class="col-md-6">
          <label class="form-label">Meta Title (SEO)</label>
          <input
            name="meta_title"
            class="form-control"
            value="{{ data.get('meta_title', current.meta_title if current else '') }}"
          >
        </div>
        <div class="col-12">
          <label class="form-label">Ringkasan Singkat</label>
          <textarea
            name="excerpt"
            class="form-control"
            rows="3"
          >{{ data.get('excerpt', current.excerpt if current else '') }}</textarea>
        </div>
        <div class="col-12">
          <label class="form-label">Konten Halaman</label>
          <textarea
            name="body"
            class="form-control"
            rows="10"
          >{{ data.get('body', current.body if current else '') }}</textarea>
        </div>
        <div class="col-md-6">
          <label class="form-label">Meta Description (SEO)</label>
          <input
            name="meta_desc"
            class="form-control"
            value="{{ data.get('meta_desc', current.meta_desc if current else '') }}"
          >
        </div>
      </div>

      <div class="mt-3 d-flex gap-2">
        <button class="btn btn-primary">{{ 'Create' if mode=='create' else 'Save Changes' }}</button>
        <a class="btn btn-outline-secondary" href="/admin/pages">Cancel</a>
      </div>
    </form>
  </div>
</section>
{% endblock %}
